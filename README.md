# Foundation Client Transport for Swift OpenAPI Generator

A client transport that uses the [Foundation](https://developer.apple.com/documentation/foundation) framework to perform HTTP operations. It is not prescriptive about how this integration works, allowing libraries such as [OAuthenticator](https://github.com/ChimeHQ/OAuthenticator) to be integrated quickly and without any fuss. 

Use the transport with client code generated by [Swift OpenAPI Generator](https://github.com/apple/swift-openapi-generator). 

## Supported platforms and minimum versions

| macOS     | Linux | iOS    | tvOS   | watchOS | visionOS |
| :-:       | :-:   | :-:    | :-:    | :-:     | :-:      |
| ✅ 10.15+ | ✅    | ✅ 13+ | ✅ 13+ | ✅ 6+   | ✅ 1+     |

## Usage

Add the package dependency in your `Package.swift`:

```swift
.package(url: "https://github.com/tonyarnold/swift-openapi-foundation", from: "0.0.1"),
```

Next, in your target, add `OpenAPIURLSession` to your dependencies:

```swift
.target(name: "MyTarget", dependencies: [
    .product(name: "OpenAPIURLSession", package: "swift-openapi-urlsession"),
]),
```

Then, to get started, check out `FoundationClientTransport`.

## Examples

Assuming you've integrated a library such as [OAuthenticator](https://github.com/ChimeHQ/OAuthenticator) into your project, this is all you'll need to do: 

```swift
let authenticator = Authenticator(config: ...)
let transport = FoundationClientTransport(responseProvider: authenticator.responseProvider)

let client = Client(
    serverURL: URL(string: "https://example.com")!,
    transport: transport
)
```

## Integrating Other Libraries

Integrating an existing networking library with OpenAPIFoundation requires you to provide a `responseProvider` closure:

```swift
let responseProvider: (URLRequest) async throws -> (Data, URLResponse)  
```

This is usually as simple as adding an extension on the networking library's "main" type. You can see how [OAuthenticator](https://github.com/ChimeHQ/OAuthenticator) does this [in their repository](https://github.com/ChimeHQ/OAuthenticator/blob/b33e2e070d9d691bde5e6ab01aca29c7d52c339a/Sources/OAuthenticator/URLSession%2BResponseProvider.swift#L8-L25).
